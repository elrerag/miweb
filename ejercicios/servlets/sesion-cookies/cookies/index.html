


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.6">
    
    
      
        <title>Cookies - Java Full Stack Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.4b9ffd7b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cookies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../../.." title="Java Full Stack Docs" class="md-header-nav__button md-logo" aria-label="Java Full Stack Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Java Full Stack Docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Cookies
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Java Full Stack Docs" class="md-nav__button md-logo" aria-label="Java Full Stack Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Java Full Stack Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../repaso/teoria/poo/herencia/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="cookies">Cookies</h1>
<p>Las cookies son uno de los elementos que pueden ser enviados al cliente, aunque esta práctica no se está permitiendo, ya que son utilizadas para hacer seguimiento por parte de compañías. Es por eso que se debe avisar al usuario que la web utiliza cookies. Su tamáño es pequeño por que así lo determinan los navegadores 4kb. y se recomienda un máximo de 50 pares de clave y valor.
Las cookies son simples ficheros de texto en plano que no contienen absolutamente ningún programa. No se ejecutan ni pueden infiltrarse en un ordenador, pero ante las leyes no nos queda otra que obedecer.</p>
<p>Si guardamos que el usuario ha aceptado las cookies en cualquier variable persistente como la sesión o el local storage del navegador, podemos no mostrar el mensaje al usuario si este ya ha acetado las coolies.</p>
<hr />
<h1 id="ejemplo">Ejemplo</h1>
<hr />
<p>En el siguiente ejemplo, preguntamos al usuario si es que desea aceptar las cookies, si lo hace, guardamos su respuesta en la memoria de su navegador. Luego enviamos texto , OJO 👁, solamente puede ser texto, sin caracteres especiales, la cookie no acepta nada más.</p>
<p>La cookie será capturada a modo de ejemplo con javascript, usualmente no lo debemos permitir, desde el servidor, pero se ejemplifica para efectos académicos.</p>
<p>Estructura:</p>
<pre><code>./
├── WebContent
│   ├── META-INF
│   │   └── MANIFEST.MF
│   ├── WEB-INF
│   │   ├── lib
│   │   └── web.xml
│   ├── index.jsp
│   ├── politica.html
│   └── recibe.jsp
├── pom.xml
├── src
│   ├── main
│   │   ├── java
│   │   │   └── cl
│   │   │       └── lherrera
│   │   │           └── sesion
│   │   │               └── servlets
│   │   │                   └── ProcesaForm.java
│   │   └── resources
│   └── test
│       ├── java
│       └── resources
└── target
    ├── classes
    │   ├── META-INF
    │   │   ├── MANIFEST.MF
    │   │   └── maven
    │   │       └── cl.lherrera
    │   │           └── cookies
    │   │               ├── pom.properties
    │   │               └── pom.xml
    │   └── cl
    │       └── lherrera
    │           └── sesion
    │               └── servlets
    │                   └── ProcesaForm.class
    └── test-classes

26 directories, 11 files

</code></pre>

<p><code>/cookies/WebContent/WEB-INF/web.xml</code></p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;4.0&quot;&gt;
  &lt;display-name&gt;sesion002&lt;/display-name&gt;
  &lt;welcome-file-list&gt;
    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
  &lt;/welcome-file-list&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;Procesa el formulario&lt;/servlet-name&gt;
        &lt;servlet-class&gt;cl.lherrera.sesion.servlets.ProcesaForm&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Procesa el formulario&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/procesaForm&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt; 
&lt;/web-app&gt;
</code></pre>

<p>Vistas</p>
<p><code>/cookies/WebContent/index.jsp</code></p>
<pre><code class="html">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
    pageEncoding=&quot;UTF-8&quot;%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;style&gt;
    #cajacookies {
        box-shadow: 0px 0px 5px 5px #808080;
        background-color: white;
        color: black;
        padding: 10px;
        margin-left: -15px;
        margin-right: -15px;
        margin-bottom: 0px;
        position: fixed;
        top: 0px;
        width: 100%;
    }

    #cajacookies button {
        color: black;
    }
&lt;/style&gt;

&lt;body&gt;



&lt;!-- inicio de cookies --&gt;

    &lt;div id=&quot;cajacookies&quot;&gt;
        &lt;p&gt;
            &lt;button onclick=&quot;aceptarCookies()&quot; class=&quot;pull-right&quot;&gt;
                &lt;i class=&quot;fa fa-times&quot;&gt;&lt;/i&gt; Aceptar y cerrar éste mensaje
            &lt;/button&gt;
            Este sitio web usa cookies, si permanece aquí acepta su uso. Puede
            leer más sobre el uso de cookies en nuestra &lt;a href=&quot;politica.html&quot;&gt;política
                de privacidad&lt;/a&gt;.
        &lt;/p&gt;
    &lt;/div&gt;

    &lt;form action=&quot;procesaForm&quot; method=&quot;post&quot;&gt;
        Valor a grabar en la cookie: &lt;input type=&quot;text&quot; name=&quot;valor&quot; /&gt;
        &lt;button type=&quot;submit&quot;&gt;Enviar&lt;/button&gt;
    &lt;/form&gt;


    &lt;script src=&quot;https://code.jquery.com/jquery-3.4.1.min.js&quot;
        integrity=&quot;sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=&quot;
        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

    &lt;script&gt;
        /* ésto comprueba la localStorage si ya tiene la variable guardada */
        function compruebaAceptaCookies() {
            if (localStorage.aceptaCookies == 'true') {
                cajacookies.style.display = 'none';
            }
        }

        /* aquí guardamos la variable de que se ha
         aceptado el uso de cookies así no mostraremos
         el mensaje de nuevo */
        function aceptarCookies() {
            localStorage.aceptaCookies = 'true';
            cajacookies.style.display = 'none';
        }

        /* ésto se ejecuta cuando la web está cargada */
        $(document).ready(function() {
            compruebaAceptaCookies();
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><code>/cookies/WebContent/politica.html</code></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    El GDPR (General Data Protection Regulation), RGPD (Reglamento General de Protección de Datos de la UE) O LGDP (Ley general de protección de datos) son una serie de regulaciones que la Agencia de Protección de datos o AEPD ha confirmado como adecuadas en las garantías de los compromisos contractuales, brindados por Google para las transferencias internacionales de datos a Los Estados Unidos. A través de las herramientas G Suite y Google Cloud Platform.
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><code>/cookies/WebContent/recibe.jsp</code></p>
<pre><code class="html">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
    pageEncoding=&quot;UTF-8&quot;%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;title&gt;Recibe&lt;/title&gt;
&lt;/head&gt;
&lt;body onload=&quot;getCookie()&quot;&gt;

&lt;div id=&quot;cookies&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
function getCookie(cookieName){
    var elemento = document.getElementById(&quot;cookies&quot;);
    console.log(&quot;Ejecutado&quot;);
      var cookieArray = document.cookie.split(';');

      cookieArray.forEach(galleta =&gt; {
          elemento.innerHTML = elemento.innerHTML + '&lt;br/&gt;' + galleta; 
      });
    }
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Servlet</p>
<p><code>/cookies/src/main/java/cl/lherrera/sesion/servlets/ProcesaForm.java</code></p>
<pre><code class="java">package cl.lherrera.sesion.servlets;

import java.io.IOException;
import java.util.logging.Logger;

import javax.servlet.ServletException;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ProcesaForm extends HttpServlet{

    private static final long serialVersionUID = 1421144908062873148L;
    private static Logger logger = Logger.getLogger(ProcesaForm.class.getName());
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) {

        Cookie cookie = new Cookie(&quot;valor&quot;, req.getParameter(&quot;valor&quot;) );
        resp.addCookie(cookie);

        doGet(req, resp);

    }
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {

        try {
            req.getRequestDispatcher(&quot;recibe.jsp&quot;).forward(req, resp);
        } catch (ServletException | IOException e) {
            logger.severe(e.getMessage());
        }
    }
}

</code></pre>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/vendor.a0c4167b.min.js"></script>
      <script src="../../../../assets/javascripts/bundle.fb26dd1d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../../..",
          features: [],
          search: Object.assign({
            worker: "../../../../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>