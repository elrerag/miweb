


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.6">
    
    
      
        <title>Frontend - Java Full Stack Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.4b9ffd7b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2-mantenedor-de-usuarios-frontend" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../../../.." title="Java Full Stack Docs" class="md-header-nav__button md-logo" aria-label="Java Full Stack Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Java Full Stack Docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Frontend
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Java Full Stack Docs" class="md-nav__button md-logo" aria-label="Java Full Stack Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Java Full Stack Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../repaso/teoria/poo/herencia/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#estructura-del-proyecto" class="md-nav__link">
    Estructura del proyecto
  </a>
  
    <nav class="md-nav" aria-label="Estructura del proyecto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comunes" class="md-nav__link">
    comunes
  </a>
  
    <nav class="md-nav" aria-label="comunes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cdmsjshtml" class="md-nav__link">
    cdmsJs.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headhtml" class="md-nav__link">
    head.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navhtml" class="md-nav__link">
    nav.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#js" class="md-nav__link">
    js
  </a>
  
    <nav class="md-nav" aria-label="js">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#indexjs" class="md-nav__link">
    index.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iniciarsesionjs" class="md-nav__link">
    iniciarSesion.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usuariosjs" class="md-nav__link">
    usuarios.js
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexhtml" class="md-nav__link">
    index.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iniciarsesionhtml" class="md-nav__link">
    iniciarSesion.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registrarhtml" class="md-nav__link">
    registrar.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usuarioshtml" class="md-nav__link">
    usuarios.html
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" class="md-nav__link">
    TODO
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <blockquote>
<h1 id="2-mantenedor-de-usuarios-frontend">2 Mantenedor de Usuarios - <code>FrontEnd</code></h1>
<blockquote>
<ul>
<li>EL siguiente, es un proyecto construido con <code>vanilla js</code>. Usando <code>templates</code> para archivos comunes como lo es el <code>nav</code>.</li>
<li>Esta aplicación, permite:<ul>
<li>Registrar un usuario, iniciar sesión y listar los usuarios registrados.</li>
</ul>
</li>
<li>Quedan pendientes otras implementaciones, y más detalle en validaciones; pero con lo desarrollado, se expone una aplicación de <code>frontEnd</code> que consuma el servicio desarrollado en <code>Spring</code> utilizando <code>JWT</code>.</li>
</ul>
</blockquote>
</blockquote>
<hr />
<p><br /></p>
<blockquote>
<h2 id="estructura-del-proyecto"><strong>Estructura del proyecto</strong></h2>
</blockquote>
<pre><code>./
├── comunes
│   ├── cdmsJs.html
│   ├── head.html
│   ├── js
│   │   ├── index.js
│   │   ├── iniciarSesion.js
│   │   └── usuarios.js
│   └── nav.html
├── favicon.ico
├── index.html
├── iniciarSesion.html
├── registrar.html
└── usuarios.html

3 directories, 19 files

</code></pre>

<h3 id="comunes"><strong>comunes</strong></h3>
<h4 id="cdmsjshtml"><strong><code>cdmsJs.html</code></strong></h4>
<p>Contiene los <code>cmd - js</code> necesarios para que funcione <code>bootstrap</code>. (Quizás se debería replantear el nombre)</p>
<pre><code class="html">&lt;!--Bootstrap 4--&gt;
&lt;script src=&quot;https://code.jquery.com/jquery-3.5.1.slim.min.js&quot;
integrity=&quot;sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj&quot;
crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js&quot;
integrity=&quot;sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo&quot;
crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js&quot;
integrity=&quot;sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI&quot;
crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

</code></pre>

<h4 id="headhtml"><strong><code>head.html</code></strong></h4>
<p>Contiene la información compartida del <code>head</code>, se genera como plantilla, por que será igual para todas las ventanas.</p>
<pre><code class="html">&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
&lt;title&gt;JWT - FRONT&lt;/title&gt;
&lt;!--Bootstrap 4--&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css&quot;
    integrity=&quot;sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk&quot; crossorigin=&quot;anonymous&quot;&gt;
</code></pre>

<h4 id="navhtml"><strong><code>nav.html</code></strong></h4>
<p>Contiene el menú de la aplicación, este será el mismo para todas las páginas.</p>
<pre><code class="html">&lt;ul class=&quot;nav&quot;&gt;
    &lt;li class=&quot;nav-item&quot;&gt;
        &lt;a class=&quot;nav-link&quot; href=&quot;javascript:irA('index.html')&quot;&gt;Inicio&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&quot;nav-item&quot;&gt;
        &lt;a class=&quot;nav-link&quot; href=&quot;javascript:irA('usuarios.html')&quot;&gt;Usuarios&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&quot;nav-item&quot;&gt;
        &lt;a class=&quot;nav-link&quot; href=&quot;javascript:irA('registrar.html')&quot;&gt;Registrar&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&quot;nav-item&quot;&gt;
        &lt;a class=&quot;nav-link&quot; href=&quot;javascript:irA('iniciarSesion.html')&quot;&gt;Cerrar Sesión&lt;/a&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<h4 id="js"><strong><code>js</code></strong></h4>
<ul>
<li>Contiene los códigos <code>javascript</code>, personalizados para cada <code>página</code>, algunos se repiten; pero es para efectos explicativos del ejercicio, por sobre su óptimo funcionamiento productivo.</li>
<li>Su funcionamiento está basado en la resolución de la promesa del servicio que consumen, y su implementación se basa en la especificación del consumo de estos servicios.</li>
<li>Si la implementación de los servicios en el <code>Backend</code> cambian, estas implementación, probablemente deban ser ajustadas en este lugar, ya que acá están los consumos.</li>
</ul>
<h5 id="indexjs"><strong><code>index.js</code></strong></h5>
<pre><code class="javascript">// algunas funciones se repetirán, solamente para claridad del ejemplo
// para no tener dependencia de los demás archivos, ya que este sistema
// no va a seguir creciendo, en caso que se utilice como base
// refactorizar.

const irA = (uri) =&gt; {
    window.location.href = `${getBaseURL()}/${uri}`;
}

// copiada de la web, indica la URL actual, por si esta 
// cambiam, es mejor que sea capturada automáticamente
function getBaseURL(){
    var elem=document.getElementsByTagName(&quot;base&quot;)[0];
    if (typeof(elem) != 'undefined' &amp;&amp; elem != null){
        return elem.href;
    }
    return window.location.origin;
}

/**
 * Función que es ejecutada al iniciar la carga del cuerpo de la web, se llama
 * a esta función, que tiene como objetivo, cargar los datos del usuarioç
 * que se encuetra con la sesión iniciada
 * */
const cargaWeb = () =&gt; {
    const token = sessionStorage.getItem('token')
    console.log(&quot;token: &quot;, token)
    if (token) {
        const correo = sessionStorage.getItem('correo')

        const url = `http://localhost:9090/api/v1/usuarios?correo=${correo}`
        const atributos = {
            method: 'POST', // or 'PUT'
            headers: {
                &quot;Content-type&quot;: &quot;application/json; charset=UTF-8&quot;,
                &quot;Autorizacion&quot;: `${token}`
            }
        }

        fetch(url, atributos)
            .then(response =&gt; {
                if (response.status !== 403) {
                    return response.json()
                } else {
                    window.location.href = `${getBaseURL()}/iniciarSesion.html`; // redirección al inicio de sesión.
                }
            })
            .then(responseJson =&gt; {
                if (responseJson.status === 200) {
                    const usuario = responseJson.data
                    document.querySelector('#nombreUsuario').innerHTML = usuario.nombre // finalidad de esta función.
                }
                else {
                    document.querySelector('#nombreUsuario').innerHTML = &quot;Hubo un problema al cargar al usuario&quot;
                }
            })
            .catch(error =&gt; {
                console.log('Hubo un problema con la petición Fetch:' + error.message);
            });
    } else {
        window.location.href = `${getBaseURL()}/iniciarSesion.html`;
    }
}

/**
 * incluido, solamente para poder usar plantillas
 * */
function includeHTML() {
    var z, i, elmnt, file, xhttp;
    /* Loop through a collection of all HTML elements: */
    z = document.getElementsByTagName(&quot;*&quot;);
    for (i = 0; i &lt; z.length; i++) {
        elmnt = z[i];
        /*search for elements with a certain attribute:*/
        file = elmnt.getAttribute(&quot;w3-include-html&quot;);
        if (file) {
            /* Make an HTTP request using the attribute value as the file name: */
            xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4) {
                    if (this.status == 200) { elmnt.innerHTML = this.responseText; }
                    if (this.status == 404) { elmnt.innerHTML = &quot;Page not found.&quot;; }
                    /* Remove the attribute, and call this function once more: */
                    elmnt.removeAttribute(&quot;w3-include-html&quot;);
                    includeHTML();
                }
            }
            xhttp.open(&quot;GET&quot;, file, true);
            xhttp.send();
            /* Exit the function: */
            return;
        }
    }
}
includeHTML();
</code></pre>

<h5 id="iniciarsesionjs"><strong><code>iniciarSesion.js</code></strong></h5>
<pre><code class="javascript">function getBaseURL() {
  var elem = document.getElementsByTagName(&quot;base&quot;)[0];
  if (typeof elem != &quot;undefined&quot; &amp;&amp; elem != null) {
    return elem.href;
  }
  return window.location.origin;
}

const iniciarSesion = (e) =&gt; {
  const formulario = e.parentElement;
  let correo = formulario.correo.value;
  let password = formulario.password.value;
  sessionStorage.setItem(&quot;token&quot;, null);
  sessionStorage.setItem(&quot;correo&quot;, null);
  let token;

  if (correo &amp;&amp; password) {
    const url = `http://localhost:9090/api/v1/iniciarsesion?correo=${correo}&amp;password=${password}`;
    const atributos = {
      method: &quot;POST&quot;, // or 'PUT'
      headers: { &quot;Content-type&quot;: &quot;application/json; charset=UTF-8&quot; },
    };

    fetch(url, atributos)
      .then((response) =&gt; response.json())
      .then((responseJson) =&gt; {
        if (responseJson.status === 200) {
          token = `Bearer ${responseJson.data}`;
          sessionStorage.setItem(&quot;token&quot;, token);
          sessionStorage.setItem(&quot;correo&quot;, correo);
          window.location.href = `${getBaseURL()}/index.html`;
        } else {
          const mensaje = `
                &lt;div class=&quot;alert alert-danger alert-dismissible fade show&quot; role=&quot;alert&quot;&gt;
                    &lt;strong&gt;${responseJson.message}&lt;/strong&gt; 
                    &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot; aria-label=&quot;Close&quot;&gt;
                        &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;
                    &lt;/button&gt;
                &lt;/div&gt;
                `;
          document.querySelector(&quot;#mensaje&quot;).innerHTML = mensaje;
          formulario.correo.value = &quot;&quot;;
          formulario.password.value = &quot;&quot;;
        }
      })
      .catch((error) =&gt; {
        console.log(&quot;Hubo un problema con la petición Fetch:&quot; + error.message);
      });
  }
};

function includeHTML() {
  var z, i, elmnt, file, xhttp;
  /* Loop through a collection of all HTML elements: */
  z = document.getElementsByTagName(&quot;*&quot;);
  for (i = 0; i &lt; z.length; i++) {
    elmnt = z[i];
    /*search for elements with a certain attribute:*/
    file = elmnt.getAttribute(&quot;w3-include-html&quot;);
    if (file) {
      /* Make an HTTP request using the attribute value as the file name: */
      xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4) {
          if (this.status == 200) {
            elmnt.innerHTML = this.responseText;
          }
          if (this.status == 404) {
            elmnt.innerHTML = &quot;Page not found.&quot;;
          }
          /* Remove the attribute, and call this function once more: */
          elmnt.removeAttribute(&quot;w3-include-html&quot;);
          includeHTML();
        }
      };
      xhttp.open(&quot;GET&quot;, file, true);
      xhttp.send();
      /* Exit the function: */
      return;
    }
  }
}
includeHTML();

</code></pre>

<h5 id="usuariosjs"><strong><code>usuarios.js</code></strong></h5>
<pre><code class="javascript">const cargaTabla = () =&gt; {
  const token = sessionStorage.getItem(&quot;token&quot;);
  if (token) {
    const correo = sessionStorage.getItem(&quot;correo&quot;);
    const url = `http://localhost:9090/api/v1/usuarios`;
    const atributos = {
      method: &quot;GET&quot;, // or 'PUT'
      headers: {
        &quot;Content-type&quot;: &quot;application/json; charset=UTF-8&quot;,
        Autorizacion: `${token}`,
      },
    };
    fetch(url, atributos)
      .then((response) =&gt; response.json())
      .then((mi_json) =&gt; {
        $(&quot;#tabla&quot;).DataTable({
          data: mi_json.data.map((x) =&gt; [
            x.nombre,
            x.email,
            x.roles.reduce((rol, cadena) =&gt; cadena + &quot; &quot; + rol, &quot;&quot;),
          ]),
          language: {
            url:
              &quot;https://cdn.datatables.net/plug-ins/1.10.21/i18n/Spanish.json&quot;,
          },
        });
      })
      .catch((error) =&gt; {
        console.log(&quot;Hubo un problema con la petición Fetch:&quot; + error.message);
      });
  } else {
    window.location.href = `${getBaseURL()}/iniciarSesion.html`;
  }
};

const irA = (uri) =&gt; {
  window.location.href = `${getBaseURL()}/${uri}`;
};

function getBaseURL() {
  var elem = document.getElementsByTagName(&quot;base&quot;)[0];
  if (typeof elem != &quot;undefined&quot; &amp;&amp; elem != null) {
    return elem.href;
  }
  return window.location.origin;
}

function includeHTML() {
  var z, i, elmnt, file, xhttp;
  /* Loop through a collection of all HTML elements: */
  z = document.getElementsByTagName(&quot;*&quot;);
  for (i = 0; i &lt; z.length; i++) {
      elmnt = z[i];
      /*search for elements with a certain attribute:*/
      file = elmnt.getAttribute(&quot;w3-include-html&quot;);
      if (file) {
          /* Make an HTTP request using the attribute value as the file name: */
          xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function () {
              if (this.readyState == 4) {
                  if (this.status == 200) { elmnt.innerHTML = this.responseText; }
                  if (this.status == 404) { elmnt.innerHTML = &quot;Page not found.&quot;; }
                  /* Remove the attribute, and call this function once more: */
                  elmnt.removeAttribute(&quot;w3-include-html&quot;);
                  includeHTML();
              }
          }
          xhttp.open(&quot;GET&quot;, file, true);
          xhttp.send();
          /* Exit the function: */
          return;
      }
  }
}
includeHTML();


</code></pre>

<h3 id="indexhtml"><strong><code>index.html</code></strong></h3>
<p>Ventana principal, de la cual, la aplicación, iniciará inmediatamente después de hacer el inicio de la sesión.</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;

&lt;head&gt;
    &lt;!-- head --&gt;
    &lt;div w3-include-html=&quot;comunes/head.html&quot;&gt;&lt;/div&gt;
    &lt;!-- head --&gt;
&lt;/head&gt;

&lt;body onload=&quot;cargaWeb()&quot;&gt;
    &lt;!-- nav --&gt;
    &lt;div w3-include-html=&quot;comunes/nav.html&quot;&gt;&lt;/div&gt;
    &lt;!-- nav #--&gt;

    &lt;!-- contenedor --&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;row my-5&quot;&gt;
            &lt;div class=&quot;col-3&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;col-6&quot;&gt;
                &lt;!-- contenido --&gt;
                Bienvenido: &lt;span id=&quot;nombreUsuario&quot;&gt;&lt;/span&gt;
                &lt;!-- contenido #--&gt;
            &lt;/div&gt;
            &lt;div class=&quot;col-3&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- contenedor #--&gt;

    &lt;!-- cdn comunes --&gt;
    &lt;div w3-include-html=&quot;comunes/cdmsJs.html&quot;&gt;&lt;/div&gt;
    &lt;!-- cdn comunes --&gt;

    &lt;!-- js de la lógica de la página --&gt;
    &lt;script src=&quot;comunes/js/index.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>

<h3 id="iniciarsesionhtml"><strong><code>iniciarSesion.html</code></strong></h3>
<ul>
<li>Falta usar la plantilla (reparar cuando se pueda, no es imperativo para el ejemplo "como es el login, no se hizo para que no comparta implementación con las otras páginas; pero se debe revisar su inclusión para un ejemplo productivo")</li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;!-- head --&gt;
    &lt;div w3-include-html=&quot;comunes/head.html&quot;&gt;&lt;/div&gt;
    &lt;!-- head --&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- contenedor --&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;row my-5&quot;&gt;
            &lt;div class=&quot;col-3&quot;&gt;&lt;/div&gt;
            &lt;!-- contenido --&gt;
            &lt;div class=&quot;col-6&quot;&gt;
                &lt;!--Formulario--&gt;
                &lt;h1&gt;Iniciar Sesión&lt;/h1&gt;
                &lt;div id=&quot;mensaje&quot;&gt;&lt;/div&gt;
                &lt;form&gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                      &lt;label for=&quot;correo&quot;&gt;Dirección de Correo&lt;/label&gt;
                      &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;correo&quot; placeholder=&quot;Ingrese su Dirección de Correo...&quot;&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;form-group&quot;&gt;
                      &lt;label for=&quot;password&quot;&gt;Contraseña&lt;/label&gt;
                      &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;password&quot; placeholder=&quot;Ingrese su Contraseña...&quot;&gt;
                    &lt;/div&gt;

                    &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary my-5&quot; onclick=&quot;iniciarSesion(this)&quot;&gt;Ingresar&lt;/button&gt;
                  &lt;/form&gt;
                &lt;!--Formulario#--&gt;
            &lt;/div&gt;
            &lt;!-- contenido #--&gt;
            &lt;div class=&quot;col-3&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- contenedor #--&gt;

    &lt;!-- cdn comunes --&gt;
    &lt;div w3-include-html=&quot;comunes/cdmsJs.html&quot;&gt;&lt;/div&gt;
    &lt;!-- cdn comunes --&gt;

    &lt;!-- js de la lógica de la página --&gt;
    &lt;script src=&quot;comunes/js/iniciarSesion.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h3 id="registrarhtml"><strong><code>registrar.html</code></strong></h3>
<ul>
<li>Registra un usuario en el sistema. Se añade un mensaje de ingreso exitoso.</li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Registrar - Usuario&lt;/title&gt;
    &lt;!--Bootstrap 4--&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css&quot; integrity=&quot;sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk&quot; crossorigin=&quot;anonymous&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- nav --&gt;
    &lt;ul class=&quot;nav&quot;&gt;
        &lt;li class=&quot;nav-item&quot;&gt;
            &lt;a class=&quot;nav-link&quot; href=&quot;javascript:irA('index.html')&quot;&gt;Inicio&lt;/a&gt;
        &lt;/li&gt;
        &lt;li class=&quot;nav-item&quot;&gt;
            &lt;a class=&quot;nav-link&quot; href=&quot;javascript:irA('usuarios.html')&quot;&gt;Usuarios&lt;/a&gt;
        &lt;/li&gt;
        &lt;li class=&quot;nav-item&quot;&gt;
            &lt;a class=&quot;nav-link disabled&quot; href=&quot;javascript:irA('registrar.html')&quot;&gt;Registrar&lt;/a&gt;
        &lt;/li&gt;
        &lt;li class=&quot;nav-item&quot;&gt;
            &lt;a class=&quot;nav-link&quot; href=&quot;javascript:irA('iniciarSesion.html')&quot;&gt;Cerrar Sesión&lt;/a&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
    &lt;!-- nav #--&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;row&quot;&gt;
            &lt;div class=&quot;col-3&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;col-6&quot;&gt;
                &lt;!--Formulario--&gt;
                &lt;h1&gt;REGISTRAR USUARIO&lt;/h1&gt;
                &lt;div id=&quot;mensaje&quot;&gt;&lt;/div&gt;
                &lt;form&gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                      &lt;label for=&quot;nombre&quot;&gt;Nombre&lt;/label&gt;
                      &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;nombre&quot; placeholder=&quot;Ingrese su nombre...&quot;&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;form-group&quot;&gt;
                      &lt;label for=&quot;email&quot;&gt;Correo Electrónico&lt;/label&gt;
                      &lt;input type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;email&quot; placeholder=&quot;Ingrese su correo electrónico...&quot;&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;form-group&quot;&gt;
                      &lt;label for=&quot;password&quot;&gt;Contraseña&lt;/label&gt;
                      &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;password&quot; placeholder=&quot;Ingrese la contraseña...&quot; &gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label for=&quot;confirma_password&quot;&gt;Confirmar contraseña&lt;/label&gt;
                        &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;confirma_password&quot; placeholder=&quot;Confirme la contraseña...&quot;&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;custom-control custom-switch &quot;&gt;
                        &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input &quot; id=&quot;esAdmin&quot;&gt;
                        &lt;label class=&quot;custom-control-label&quot; for=&quot;esAdmin&quot;&gt;Es administrador&lt;/label&gt;
                    &lt;/div&gt;

                    &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary my-5&quot; onclick=&quot;registrarUsuario(this)&quot;&gt;Ingresar&lt;/button&gt;
                  &lt;/form&gt;
                &lt;!--Formulario#--&gt;
            &lt;/div&gt;
            &lt;div class=&quot;col-3&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;!--Bootstrap 4--&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.5.1.slim.min.js&quot; integrity=&quot;sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js&quot; integrity=&quot;sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js&quot; integrity=&quot;sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;




    &lt;!--Lógica de la página--&gt;
    &lt;script&gt;
        const irA = (uri) =&gt; {
            window.location.href = `${getBaseURL()}/${uri}`;
        }

        function getBaseURL(){
            var elem=document.getElementsByTagName(&quot;base&quot;)[0];
            if (typeof(elem) != 'undefined' &amp;&amp; elem != null){
                return elem.href;
            }
            return window.location.origin;
        }
        const registrarUsuario = (e) =&gt; {
            const mensaje = `
            &lt;div class=&quot;alert alert-success alert-dismissible fade show&quot; role=&quot;alert&quot;&gt;
                &lt;strong&gt;Usuario ingresado!&lt;/strong&gt; 
                &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot; aria-label=&quot;Close&quot;&gt;
                    &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
            &lt;/div&gt;
            `

            const formulario = e.parentElement
            const password = formulario.password.value;
            const password_con = formulario.confirma_password.value;
            const esAdmin = formulario.esAdmin.checked
            let roles = new Array(&quot;ROLE_USUARIO&quot;)
            console.log(&quot;es chequeado: &quot; + esAdmin)

            if(esAdmin)
                roles = roles = new Array(&quot;ROLE_USUARIO&quot;, &quot;ROLE_ADMINISTRADOR&quot;)

            if(password !== password_con){
                alert('contraseña no son iguales')
                return
            }
            const datos = {
                &quot;nombre&quot;: `${formulario.nombre.value}`,
                &quot;email&quot;: `${formulario.email.value}`,
                &quot;password&quot;: `${password}`,
                &quot;roles&quot;: roles
            }

            fetch('http://0.0.0.0:9090/api/v1/registrar', {
                method: 'POST', // or 'PUT'
                body: JSON.stringify(datos), // data can be `string` or {object}!
                headers: {&quot;Content-type&quot;: &quot;application/json; charset=UTF-8&quot;}
            }).then(res =&gt; {
                if(res.status){
                    document.querySelector(&quot;#mensaje&quot;).innerHTML = mensaje
                }
            })
            .catch(error =&gt; console.error('Error:', error))
            .then(response =&gt; console.log('Success:', response));
        }
    &lt;/script&gt;
    &lt;!--Lógica de la página#--&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h3 id="usuarioshtml"><strong><code>usuarios.html</code></strong></h3>
<ul>
<li>Con el uso de <code>datatable</code>, en este caso se inicia y la página oficial nos genera un <code>cdn</code>, que son los que ocupa esta página, no se garantiza su continuidad de funcionamiento, ya que el <code>core</code>, de la funcionalidad de los <code>datatables</code> está en un <a href="https://datatables.net/manual/">CDN</a>.</li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;

&lt;head&gt;
    &lt;!-- head --&gt;
    &lt;div w3-include-html=&quot;comunes/head.html&quot;&gt;&lt;/div&gt;
    &lt;!-- head --&gt;

    &lt;!--Bootstrap 4--&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css&quot;
        integrity=&quot;sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk&quot; crossorigin=&quot;anonymous&quot;&gt;

    &lt;!-- dataTable --&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot;
        href=&quot;https://cdn.datatables.net/v/bs4/jq-3.3.1/dt-1.10.21/b-1.6.2/b-html5-1.6.2/datatables.min.css&quot; /&gt;

&lt;/head&gt;

&lt;body onload=&quot;cargaTabla()&quot;&gt;


    &lt;!-- nav --&gt;
    &lt;div w3-include-html=&quot;comunes/nav.html&quot;&gt;&lt;/div&gt;
    &lt;!-- nav #--&gt;

    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;row my-5&quot;&gt;
            &lt;div class=&quot;col-1&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;col-10&quot;&gt;

                &lt;table id=&quot;tabla&quot; class=&quot;display table&quot; cellspacing=&quot;10&quot; width=&quot;100%&quot;&gt;
                    &lt;thead class=&quot;thead-light&quot;&gt;
                        &lt;tr&gt;
                            &lt;th scope=&quot;col&quot;&gt;Nombre&lt;/th&gt;
                            &lt;th scope=&quot;col&quot;&gt;Email&lt;/th&gt;
                            &lt;th scope=&quot;col&quot;&gt;Roles&lt;/th&gt;
                        &lt;/tr&gt;
                    &lt;/thead&gt;

                    &lt;tfoot class=&quot;thead-light&quot;&gt;
                        &lt;tr&gt;
                            &lt;th scope=&quot;col&quot;&gt;Nombre&lt;/th&gt;
                            &lt;th scope=&quot;col&quot;&gt;Email&lt;/th&gt;
                            &lt;th scope=&quot;col&quot;&gt;Roles&lt;/th&gt;
                        &lt;/tr&gt;
                    &lt;/tfoot&gt;
                &lt;/table&gt;

            &lt;/div&gt;
            &lt;div class=&quot;col-1&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;!-- cdn comunes --&gt;
    &lt;div w3-include-html=&quot;comunes/cdmsJs.html&quot;&gt;&lt;/div&gt;
    &lt;!-- cdn comunes --&gt;

    &lt;!-- JQuery --&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.5.1.min.js&quot;
        integrity=&quot;sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

    &lt;!-- dataTable --&gt;
    &lt;script type=&quot;text/javascript&quot;
        src=&quot;https://cdn.datatables.net/v/bs4/jq-3.3.1/dt-1.10.21/b-1.6.2/b-html5-1.6.2/datatables.min.js&quot;&gt;&lt;/script&gt;


    &lt;!-- js de la lógica de la página --&gt;
    &lt;script src=&quot;comunes/js/usuarios.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>

<p><br /></p>
<blockquote>
<h2 id="todo"><strong><code>TODO</code></strong></h2>
</blockquote>
<ul>
<li>Agregar la capacidad de actualizar y eliminar usuarios.</li>
<li>Implementarlo en algún <code>Framework</code> de <code>js</code>, ya sea <code>vue</code>, <code>Angular</code>, <code>react</code>.</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../../assets/javascripts/vendor.a0c4167b.min.js"></script>
      <script src="../../../../../assets/javascripts/bundle.fb26dd1d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../../../..",
          features: [],
          search: Object.assign({
            worker: "../../../../../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>